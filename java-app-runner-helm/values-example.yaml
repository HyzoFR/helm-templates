# Example values file for Java App Runner
# This demonstrates a typical Minecraft server setup

replicaCount: 1

image:
  repository: eclipse-temurin
  tag: 21-jdk-alpine
  pullPolicy: IfNotPresent

app:
  # Download from a Git repository
  download:
    type: "GitRepo"
    source: "https://github.com/yourusername/minecraft-server.git"
    git:
      branch: "main"  # Specify branch (e.g., "dev", "main", "master")
      username: ""
      password: ""  # Use for private repos
  
  # Java configuration
  java:
    version: "21"
    args: "-Xmx2G -Xms2G -XX:+UseG1GC"
  
  # Application settings
  jarName: "server.jar"
  jarOptions: "nogui"
  appDir: ""  # Subdirectory if needed

  # Configuration replacements - replaces tokens in specific files
  configReplacements:
    "server.properties":
      "%SERVER_NAME%": "My Minecraft Server"
      "%SERVER_PORT%": "25565"
      "%MAX_PLAYERS%": "20"
    "config/paper-global.yml":
      "%ENABLE_COMMAND_BLOCK%": "true"

  # Template files to copy before running (optional)
  # Example: Copy a pre-built world from a template
  templateFiles:
    - hostPath: "/Users/username/minecraft-templates/overworld.zip"
      extractTo: "world"
      overwrite: false  # Only copy if world doesn't exist
    - hostPath: "/Users/username/minecraft-templates/nether.zip"
      extractTo: "world_nether"
      overwrite: false

# Expose the service
service:
  type: LoadBalancer
  port: 25565
  protocol: TCP

# Resource limits
resources:
  limits:
    cpu: 4000m
    memory: 4Gi
  requests:
    cpu: 1000m
    memory: 2Gi

# Persistent storage
persistence:
  enabled: true
  storageClass: ""
  accessMode: ReadWriteOnce
  size: 20Gi
  mountPath: /app/java-app-runner

# Environment variables
env:
  - name: TZ
    value: "UTC"

